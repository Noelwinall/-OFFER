# 問答選校問題排查

## 測試條件
- 學段：小學
- 地區：九龍
- 學費：$20,000-$50,000
- 類型：資助學校
- 課程：DSE
- 語言：以中文為主

## 結果
推薦 0 所學校

## 問題分析
1. 篩選條件過於嚴格，所有條件都是 AND 關係
2. 資助學校通常是免費的，但用戶選擇了 $20,000-$50,000 學費範圍
3. 需要改進推薦邏輯，當完全匹配結果為0時，應該放寬條件顯示部分匹配的學校

## 解決方案
1. 修改推薦邏輯：當精確匹配為0時，逐步放寬條件
2. 優先保留核心條件（學段、地區），放寬其他條件
3. 顯示匹配度分數，讓用戶了解推薦原因


---

## 2026-01-09 修復完成

### 已實施的解決方案
1. **改進推薦邏輯**：當精確匹配為 0 時，逐步放寬條件
   - 第一步：保留學段、地區、課程
   - 第二步：保留學段、地區
   - 第三步：只保留學段
   - 最後：返回所有學校

2. **新增匹配度提示**：當放寬條件時，顯示「已放寬篩選條件」提示

### 測試結果
- 選擇：中學 → 跳過地區 → 跳過學費 → 跳過類型 → IB 課程 → 全英文
- 結果：成功返回 19 所學校
- 學校卡片現在顯示中英文名稱（如 Chinese International School）

### 同時完成的功能
- [x] 為所有學校新增英文名稱（nameEn）
- [x] 為所有學校新增搜索關鍵字（searchKeywords）
- [x] 包含常用簡稱（ESF, YCIS, DBS, SPCC, CIS 等）
- [x] 更新搜索邏輯支援英文關鍵字匹配
- [x] 學校卡片顯示英文名稱
